<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>My 3-D Résumé</title>

  <!-- Full-screen canvas -->
  <style>
    html,body { margin:0; height:100%; overflow:hidden; background:#101014; }
    #resumeCanvas { display:block; width:100%; height:100%; }
    #downloadTip{
      position:fixed; bottom:20px; left:50%; transform:translateX(-50%);
      padding:8px 14px; border-radius:4px; background:#fff2; color:#ddd;
      font:0.9rem/1.4 Arial, sans-serif; pointer-events:none; opacity:0;
      transition:opacity .3s;
    }
    #downloadTip.show{ opacity:1; }
  </style>
</head>

<body>
  <canvas id="resumeCanvas"></canvas>
  <div id="downloadTip">Click the sheet to download PDF résumé</div>

  <!-- SINGLE ES-MODULE SCRIPT (no bundler) -->
  <script type="module">
    /* ---------- Imports with ?module so the CDN fixes bare specifiers ---------- */
    import * as THREE        from 'https://unpkg.com/three@0.160.0/build/three.module.js';
    import { OrbitControls } from 'https://unpkg.com/three@0.160.0/examples/jsm/controls/OrbitControls.js?module';
    import { FontLoader }    from 'https://unpkg.com/three@0.160.0/examples/jsm/loaders/FontLoader.js?module';
    import { TextGeometry }  from 'https://unpkg.com/three@0.160.0/examples/jsm/geometries/TextGeometry.js?module';

    /* ---------- Scene setup ---------- */
    const canvas   = document.getElementById('resumeCanvas');
    const scene    = new THREE.Scene();
    const camera   = new THREE.PerspectiveCamera(55, innerWidth/innerHeight, 0.1, 100);
    camera.position.set(0, 1.5, 5);

    const renderer = new THREE.WebGLRenderer({ canvas, antialias:true, alpha:true });
    renderer.setPixelRatio(devicePixelRatio);
    renderer.setSize(innerWidth, innerHeight);

    /* ---------- Lights ---------- */
    scene.add(new THREE.AmbientLight(0xffffff, 0.5));
    const dir = new THREE.DirectionalLight(0xffffff, 1);
    dir.position.set(3,4,5);
    scene.add(dir);

    /* ---------- 3-D Name ---------- */
    const fontLoader = new FontLoader();
    fontLoader.load('./helvetiker_regular.typeface.json', font => {
      const textGeo = new TextGeometry('YOUR NAME', {
        font, size:0.6, height:0.15, curveSegments:12,
        bevelEnabled:true, bevelThickness:0.02, bevelSize:0.02, bevelSegments:5
      });
      textGeo.center();
      const mat = new THREE.MeshStandardMaterial({ color:0x00c8ff, metalness:0.5, roughness:0.25 });
      const mesh = new THREE.Mesh(textGeo, mat);
      mesh.position.y = 0.5;
      scene.add(mesh);
    });

    /* ---------- Decorative shapes ---------- */
    const decoMat = new THREE.MeshStandardMaterial({ color:0xff4080, metalness:0.3, roughness:0.4 });
    const octa1   = new THREE.Mesh(new THREE.OctahedronGeometry(0.3), decoMat);
    const octa2   = octa1.clone();
    octa1.position.set(-1.3, 1.1, 0);
    octa2.position.set( 1.3,-0.8, 0);
    scene.add(octa1, octa2);

    /* ---------- Clickable résumé plane ---------- */
    const planeGeo  = new THREE.PlaneGeometry(1.5, 2);
    const planeMat  = new THREE.MeshBasicMaterial({ color:0xffffff, opacity:0.6, transparent:true });
    const resumePDF = new THREE.Mesh(planeGeo, planeMat);
    resumePDF.position.set(0,-1.1,0);
    scene.add(resumePDF);

    /* ---------- Orbit controls ---------- */
    const controls = new OrbitControls(camera, renderer.domElement);
    controls.enableDamping = true;

    /* ---------- Ray-casting interaction ---------- */
    const raycaster = new THREE.Raycaster();
    const pointer   = new THREE.Vector2();
    const tip       = document.getElementById('downloadTip');

    function onPointerMove(e){
      pointer.x =  (e.clientX / innerWidth ) * 2 - 1;
      pointer.y = -(e.clientY / innerHeight) * 2 + 1;
    }
    window.addEventListener('pointermove', onPointerMove);

    window.addEventListener('click', () => {
      raycaster.setFromCamera(pointer, camera);
      if (raycaster.intersectObject(resumePDF).length){
        window.open('./resume.pdf', '_blank');  // adjust path if needed
      }
    });

    function updateTooltip(){
      raycaster.setFromCamera(pointer, camera);
      tip.classList.toggle('show', raycaster.intersectObject(resumePDF).length>0);
    }

    /* ---------- Render loop ---------- */
    function animate(){
      requestAnimationFrame(animate);
      octa1.rotation.x += 0.01;  octa1.rotation.y += 0.015;
      octa2.rotation.x -= 0.015; octa2.rotation.y -= 0.01;
      controls.update();
      updateTooltip();
      renderer.render(scene, camera);
    }
    animate();

    /* ---------- Handle resize ---------- */
    window.addEventListener('resize', () => {
      camera.aspect = innerWidth/innerHeight;
      camera.updateProjectionMatrix();
      renderer.setSize(innerWidth, innerHeight);
    });
  </script>
</body>
</html>
